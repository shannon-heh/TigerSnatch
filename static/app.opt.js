var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):
$jscomp.POLYFILL_PREFIX+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}},"es6","es3");
var toastAdded=$($.parseHTML('\n<div\n    id="toast-added"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Successfully subscribed!</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),toastRemoved=
$($.parseHTML('\n<div\n    id="toast-removed"\n    class="toast align-items-center text-white bg-warning border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Successfully unsubscribed!</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastUserDoesNotExist=$($.parseHTML('\n<div\n    id="toast-user-does-not-exist"\n    class="toast align-items-center text-white bg-danger border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">That netID does not exist.</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastEmailsOn=$($.parseHTML('\n<div\n    id="toast-emails-on"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Email notifications turned on! Reloading in a few seconds...</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastEmailsOff=$($.parseHTML('\n<div\n    id="toast-emails-off"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Email notifications turned off! Reloading in a few seconds...</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastClearSuccess=$($.parseHTML('\n<div\n    id="toast-clear-success"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Cleared sucessfully!</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastClearFail=$($.parseHTML('\n<div\n    id="toast-clear-fail"\n    class="toast align-items-center text-white bg-danger border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Failed to clear. Contact a TigerSnatch developer for assistance.</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastFillSuccess=$($.parseHTML('\n<div\n    id="toast-clear-success"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Filled section sucessfully!</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastFillFail=$($.parseHTML('\n<div\n    id="toast-clear-fail"\n    class="toast align-items-center text-white bg-danger border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Failed to fill section. Check class ID or contact a TigerSnatch developer for assistance.</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastUpdateTerm=$($.parseHTML('\n<div\n    id="toast-update-term"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">TigerSnatch will update to the latest term and go offline for 2-3 minutes. Reloading in a few seconds...</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastBlacklistFail=$($.parseHTML('\n<div\n    id="toast-blacklist-fail"\n    class="toast align-items-center text-white bg-danger border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Failed to blacklist/unblacklist user.</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastBlacklistSuccess=$($.parseHTML('\n<div\n    id="toast-blacklist-success"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Successfully blacklisted/unblacklisted user! Reloading in a few seconds...</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastAddedSection=$($.parseHTML('\n<div\n    id="toast-updatesection"\n    class="toast align-items-center text-white bg-success border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Successfully saved your current section for this course!</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastAddedSectionFail=$($.parseHTML('\n<div\n    id="toast-updatesection-fail"\n    class="toast align-items-center text-white bg-danger border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Failed to save your current section for this course.</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastRemovedSection=$($.parseHTML('\n<div\n    id="toast-removedsection-success"\n    class="toast align-items-center text-white bg-warning border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Successfully removed your current section for this course!</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
toastRemovedSectionFail=$($.parseHTML('\n<div\n    id="toast-removedsection-fail"\n    class="toast align-items-center text-white bg-danger border-0"\n    role="alert"\n    aria-live="assertive"\n    aria-atomic="true"\n    data-bs-delay="3000"\n>\n    <div class="d-flex">\n        <div class="toast-body">Failed to remove your current section for this course.</div>\n        <button\n            type="button"\n            class="btn-close btn-close-white me-2 m-auto"\n            data-bs-dismiss="toast"\n            aria-label="Close"\n        ></button>\n    </div>\n</div>\n')),
scrollBottom=function(a){$(a).animate({scrollTop:$(a)[0].scrollHeight-$(a)[0].clientHeight},500)},resetScroll=function(a){$(a).animate({scrollTop:0},500)},searchFormListener=function(){$("form#search-form").on("submit",function(a){a.preventDefault();$("#search-form-input").blur();$("#search-form-input").tooltip("hide");query=encodeURIComponent($("#search-form-input").prop("value"));params=location.search;curr_path=location.pathname;if(""===params)curr_path=curr_path+"?query="+query;else for(curr_path+=
"?",params=params.replace("?",""),arr=params.split("&"),a=0;a<arr.length;a++)0<a&&(curr_path+="&"),curr_path=arr[a].startsWith("query")?curr_path+"query="+query:curr_path+arr[a];endpoint=""===query.trim()?"/searchresults":"/searchresults/"+query;$.post(endpoint,function(b){$("div#search-results").html(b);window.history.pushState({restore:"search",html:b},"restore search results",curr_path);searchResultListener();resetScroll("#search-results");dashboardSkip()})})},searchResultListener=function(){$(".search-results-link").on("click",
function(a){a.preventDefault();$("*").css("pointer-events","none");$("*").css("cursor","wait");$("#right-wrapper").css("filter","blur(2px)");$("a.selected-course").css("background-color","");$("a.selected-course").removeClass("selected-course");closest_a=$(this).closest("a");closest_a.css("background-color","#ffe58a");closest_a.addClass("selected-course");course_link=closest_a.attr("href");courseid=closest_a.attr("data-courseid");scrollBottom("#main");$.post("/courseinfo/"+courseid,function(b){$("form#search-form").attr("action",
"/course");$("input#search-form-courseid").attr("value",courseid);$("#right-wrapper").html(b);$("#right-wrapper").css("filter","");$("*").css("cursor","");$("*").css("pointer-events","");window.history.pushState({restore:"right",html:b},"",course_link);switchListener();initTooltipsToasts();showAllListener();modalCancelListener();modalConfirmListener();searchSkip();updateCurrentSection();removeCurrentSection();findMatches()})})},dashboardCourseSelectListener=function(){$(".dashboard-course-link").on("click",
function(a){$("*").css("pointer-events","none");$("#right-wrapper").css("filter","blur(2px)")})};i=0;
var switchListener=function(){$("input.waitlist-switch").change(function(a){a.preventDefault();classid=a.target.getAttribute("data-classid");$("#confirm-remove-waitlist").attr("data-classid",classid);$("#close-waitlist-modal").attr("data-classid",classid);switchid="#switch-"+classid;$(switchid).attr("checked")||($(switchid).attr("disabled",!0),$.post("/add_to_waitlist/"+classid,function(b){2===b.isSuccess?$(switchid).attr("disabled",!1):0===b.isSuccess?($("#close-waitlist-modal").modal("show"),$(switchid).attr("checked",
!1),$(switchid).prop("checked",!1),$(switchid).attr("disabled",!1)):($(switchid).attr("checked",!0),$(switchid).attr("data-bs-toggle","modal"),$(switchid).attr("data-bs-target","#confirm-remove-waitlist"),$(switchid).attr("disabled",!1),$(".toast-container").prepend(toastAdded.clone().attr("id","toast-added-"+ ++i)),$("#toast-added-"+i).toast("show"))}))})},modalConfirmListener=function(){$("#waitlist-modal-confirm").on("click",function(a){a.preventDefault();classid=$("#confirm-remove-waitlist").attr("data-classid");
switchid="#switch-"+classid;$(switchid).attr("disabled",!0);$.post("/remove_from_waitlist/"+classid,function(b){b.isSuccess?($(switchid+".dashboard-switch").closest("tr.dashboard-course-row").remove(),$(switchid).removeAttr("checked"),$(switchid).removeAttr("data-bs-toggle"),$(switchid).removeAttr("data-bs-target"),$(switchid).attr("disabled",!1),$(".toast-container").prepend(toastRemoved.clone().attr("id","toast-removed-"+ ++i)),$("#toast-removed-"+i).toast("show")):$(switchid).attr("disabled",!1)})})},
modalCancelListener=function(){$("#waitlist-modal-cancel").on("click",function(a){a.preventDefault();classid=$("#confirm-remove-waitlist").attr("data-classid");$("#switch-"+classid).prop("checked",!0)})},showAllListener=function(){$("#show-all-check").on("click",function(a){$(this).prop("checked")?($(".available-section-row").removeClass("d-none"),$("#no-full-message").addClass("d-none")):($(".available-section-row").addClass("d-none"),$("#no-full-message").removeClass("d-none"))})},pageBackListener=
function(){$(window).on("popstate",function(){location.reload()})},dashboardSkip=function(){$("#dashboard-skip").on("click",function(a){a.preventDefault();scrollBottom("#main")});-1!==window.location.href.indexOf("skip")&&$("#dashboard-skip").click()},searchSkip=function(){$("#search-skip").on("click",function(a){a.preventDefault();resetScroll("#main")})},initTooltipsToasts=function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(a){return new bootstrap.Tooltip(a)});
$("#status-indicator").on("click",function(a){a.preventDefault()});$("#dev-warning").on("click",function(a){a.preventDefault()})},navbarAutoclose=function(){$(document).click(function(a){a=$(a.target);!$(".navbar-collapse").hasClass("show")||a.hasClass("navbar-toggler")||a.hasClass("nav-item")||a.hasClass("nav-button")||a.hasClass("nav-link")||$(".navbar-toggler").click()})},blacklistToastHelper=function(a){"success"===a?($(".toast-container").prepend(toastBlacklistSuccess.clone().attr("id","toast-blacklist-success-"+
++i)),$("#toast-blacklist-success-"+i).toast("show"),$("*").css("pointer-events","none"),setTimeout(function(){return location.reload()},3100)):"fail"===a&&($(".toast-container").prepend(toastBlacklistFail.clone().attr("id","toast-blacklist-fail-"+ ++i)),$("#toast-blacklist-fail-"+i).toast("show"))},blacklistListener=function(){$("button.btn-blacklist").on("click",function(a){a.preventDefault();disableAdminFunction();netid=a.target.getAttribute("data-netid");$.post("/add_to_blacklist/"+netid,function(b){b.isSuccess?
blacklistToastHelper("success"):(enableAdminFunction(),blacklistToastHelper("fail"))})})},blacklistRemovalListener=function(){$("button.btn-blacklist-removal").on("click",function(a){a.preventDefault();disableAdminFunction();netid=a.target.getAttribute("data-netid");$.post("/remove_from_blacklist/"+netid,function(b){b.isSuccess?blacklistToastHelper("success"):(blacklistToastHelper("fail"),enableAdminFunction())})})},enableAdminFunction=function(){$(".btn-blacklist").attr("disabled",!1);$(".btn-blacklist-removal").attr("disabled",
!1);$("#clear-all").attr("disabled",!1);$("#clear-all-trades").attr("disabled",!1);$("#clear-all-logs").attr("disabled",!1);$("#update-term").attr("disabled",!1);$("#toggle-emails").attr("disabled",!1);$("#classid-clear-input").attr("disabled",!1);$("#classid-clear-submit").attr("disabled",!1);$("#courseid-clear-input").attr("disabled",!1);$("#courseid-clear-submit").attr("disabled",!1);$("#get-user-data-input").attr("disabled",!1);$("#get-user-data-submit").attr("disabled",!1);$("#fill-section-input").attr("disabled",
!1);$("#get-user-trade-data-input").attr("disabled",!1);$("#get-user-trade-data-submit").attr("disabled",!1);$("#fill-section-submit").attr("disabled",!1)},disableAdminFunction=function(){$(".btn-blacklist").attr("disabled",!0);$(".btn-blacklist-removal").attr("disabled",!0);$("#clear-all").attr("disabled",!0);$("#clear-all-trades").attr("disabled",!0);$("#clear-all-logs").attr("disabled",!0);$("#update-term").attr("disabled",!0);$("#toggle-emails").attr("disabled",!0);$("#classid-clear-input").attr("disabled",
!0);$("#classid-clear-submit").attr("disabled",!0);$("#courseid-clear-input").attr("disabled",!0);$("#courseid-clear-submit").attr("disabled",!0);$("#get-user-data-input").attr("disabled",!0);$("#get-user-data-submit").attr("disabled",!0);$("#fill-section-input").attr("disabled",!0);$("#get-user-trade-data-input").attr("disabled",!0);$("#get-user-trade-data-submit").attr("disabled",!0);$("#fill-section-submit").attr("disabled",!0)},toggleEmailNotificationsListener=function(){$("#toggle-emails").on("click",
function(a){a.preventDefault();disableAdminFunction();confirm("Are you sure you want to toggle notifications?")?$.post("/get_notifications_status",function(b){$.post("/set_notifications_status/"+!b.isOn,function(c){b.isOn?($(".toast-container").prepend(toastEmailsOff.clone().attr("id","toast-emails-off-"+ ++i)),$("#toast-emails-off-"+i).toast("show")):($(".toast-container").prepend(toastEmailsOn.clone().attr("id","toast-emails-on-"+ ++i)),$("#toast-emails-on-"+i).toast("show"));$("*").css("pointer-events",
"none");setTimeout(function(){return location.reload()},3100)})}):enableAdminFunction()})},initToggleEmailNotificationsButton=function(){$.post("/get_notifications_status",function(a){a.isOn?$("#toggle-emails").html("Turn Off"):$("#toggle-emails").html("Turn On");enableAdminFunction()})},clearWaitlistsToastHelper=function(a){a.isSuccess?($(".toast-container").prepend(toastClearSuccess.clone().attr("id","toast-clear-success-"+ ++i)),$("#toast-clear-success-"+i).toast("show")):($(".toast-container").prepend(toastClearFail.clone().attr("id",
"toast-clear-fail-"+ ++i)),$("#toast-clear-fail-"+i).toast("show"))},fillSectionToastHelper=function(a){a.isSuccess?($(".toast-container").prepend(toastFillSuccess.clone().attr("id","toast-clear-success-"+ ++i)),$("#toast-clear-success-"+i).toast("show")):($(".toast-container").prepend(toastFillFail.clone().attr("id","toast-clear-fail-"+ ++i)),$("#toast-clear-fail-"+i).toast("show"))},clearAllWaitlistsListener=function(){$("#clear-all").on("click",function(a){a.preventDefault();disableAdminFunction();
confirm("Are you sure you want to clear all subscriptions? This action is irreversible.")?$.post("/clear_all_waitlists",function(b){clearWaitlistsToastHelper(b);enableAdminFunction()}):enableAdminFunction()})},updateTermListener=function(){$("#update-term").on("click",function(a){a.preventDefault();disableAdminFunction();confirm("Are you sure you want to update TigerSnatch to the latest term? This action will clear ALL term-specific data (including user logs, Trades, subscriptions, and curent sections) and is irreversible. TigerSnatch will go into maintenance mode for 2-3 minutes while updating.")?
confirm("Are you ABSOLUTELY sure you want to update TigerSnatch to the latest term?")?($("*").css("pointer-events","none"),setTimeout(function(){return location.reload()},3100),$(".toast-container").prepend(toastUpdateTerm.clone().attr("id","toast-update-term-"+ ++i)),$("#toast-update-term-"+i).toast("show"),$.post("/update_all_courses",function(b){})):enableAdminFunction():enableAdminFunction()})},clearAllTradesListener=function(){$("#clear-all-trades").on("click",function(a){a.preventDefault();
disableAdminFunction();confirm("Are you sure you want to clear all Trades? This action is irreversible.")?$.post("/clear_all_trades",function(b){clearWaitlistsToastHelper(b);enableAdminFunction()}):enableAdminFunction()})},clearAllLogsListener=function(){$("#clear-all-logs").on("click",function(a){a.preventDefault();disableAdminFunction();confirm("Are you sure you want to clear all user logs? This action is irreversible.")?$.post("/clear_all_user_logs",function(b){clearWaitlistsToastHelper(b);enableAdminFunction()}):
enableAdminFunction()})},clearClassWaitlistListener=function(){$("#classid-clear").on("submit",function(a){a.preventDefault();classid=$("#classid-clear-input").val();disableAdminFunction();confirm("Are you sure you want to clear subscriptions for class "+classid+"? This action is irreversible.")?$.post("/clear_by_class/"+classid,function(b){clearWaitlistsToastHelper(b);$("#classid-clear-input").val("");enableAdminFunction()}):enableAdminFunction()})},fillSectionListener=function(){$("#fill-section").on("submit",
function(a){a.preventDefault();classid=$("#fill-section-input").val();disableAdminFunction();$.post("/fill_section/"+classid,function(b){fillSectionToastHelper(b);$("#fill-section-input").val("");enableAdminFunction()})})},clearCourseWaitlistListener=function(){$("#courseid-clear").on("submit",function(a){a.preventDefault();courseid=$("#courseid-clear-input").val();disableAdminFunction();confirm("Are you sure you want to clear subscriptions for course "+courseid+"? This action is irreversible.")?
$.post("/clear_by_course/"+courseid,function(b){clearWaitlistsToastHelper(b);$("#courseid-clear-input").val("");enableAdminFunction()}):enableAdminFunction()})},getUserDataListener=function(){var a=function(b,c){if("missing"===b.data)$(".toast-container").prepend(toastUserDoesNotExist.clone().attr("id","toast-user-does-not-exist-"+ ++i)),$("#toast-user-does-not-exist-"+i).toast("show"),enableAdminFunction();else{b=b.data.split(",");$("#get-"+c+"-input").val("");dataHTML="";c=$jscomp.makeIterator(b);
for(b=c.next();!b.done;b=c.next())dataHTML+='<p class="my-1">&#8594; '+b.value+"</p>";$("#modal-body-user-data").html(dataHTML);$("#user-data-waitlist-modal").modal("show")}};$("#get-user-data").on("submit",function(b){b.preventDefault();netid=$("#get-user-data-input").val();disableAdminFunction();$.post("/get_user_data/"+netid+"/false",function(c){a(c,"user-data");$("#staticBackdropLabelUserData").html("Subscribed Sections for "+netid);enableAdminFunction()})});$("#get-user-trade-data").on("submit",
function(b){b.preventDefault();netid=$("#get-user-trade-data-input").val();disableAdminFunction();$.post("/get_user_data/"+netid+"/true",function(c){a(c,"user-trade-data");$("#staticBackdropLabelUserData").html("Trade Sections for "+netid);enableAdminFunction()})})},disableTradeFunction=function(){$(".submit-trade").attr("disabled",!0);$(".save-trade").attr("disabled",!0);$(".remove-trade").attr("disabled",!0);$("*").css("pointer-events","none");$("*").css("cursor","wait")},enableTradeFunction=function(){$(".submit-trade").attr("disabled",
!1);$(".remove-trade").attr("disabled",!1);$(".save-trade").attr("disabled",!1);$("*").css("pointer-events","");$("*").css("cursor","")},updateSectionToastHelper=function(a){a.isSuccess?($(".toast-container").prepend(toastAddedSection.clone().attr("id","toast-updatesection-success-"+ ++i)),$("#toast-updatesection-success-"+i).toast("show")):($(".toast-container").prepend(toastAddedSectionFail.clone().attr("id","toast-updatesection-fail-"+ ++i)),$("#toast-updatesection-fail-"+i).toast("show"))},removeSectionToastHelper=
function(a){a.isSuccess?($(".toast-container").prepend(toastRemovedSection.clone().attr("id","toast-removedsection-success-"+ ++i)),$("#toast-removedsection-success-"+i).toast("show")):($(".toast-container").prepend(toastRemovedSectionFail.clone().attr("id","toast-removedsection-fail-"+ ++i)),$("#toast-removedsection-fail-"+i).toast("show"))},updateCurrentSection=function(){$(".trade-form").on("submit",function(a){a.preventDefault();courseid=a.target.getAttribute("courseid");classid=$("#sections-"+
courseid).val();disableTradeFunction();$.post("/update_user_section/"+courseid+"/"+classid,function(b){updateSectionToastHelper(b);curr_section=$("#sections-"+courseid+" option:selected").text();$(".submit-trade").attr("curr-section",curr_section);enableTradeFunction()})})},removeCurrentSection=function(){$(".remove-trade").on("click",function(a){a.preventDefault();courseid=a.target.getAttribute("courseid");disableTradeFunction();$.post("/remove_user_section/"+courseid,function(b){removeSectionToastHelper(b);
$(".save-trade").attr("disabled",!1);$("*").css("pointer-events","");$("*").css("cursor","");$("#sections-"+courseid).val("")})})},createEmail=function(a,b,c,d,e,f){return encodeURI("//mail.google.com/mail/?view=cm&fs=1&to="+f+"&su=TigerSnatch: Trade Sections for "+(c+" in "+e+"?&body=Hi ")+(a+",\n\nFrom TigerSnatch, I saw that you're enrolled in "+e+" "+c+". I'm currently in "+d+".\nWould you like to set up a time to trade sections with me?\n\nThank you,\n"+b))},findMatches=function(){$(".submit-trade").on("click",
function(a){a.preventDefault();courseid=a.target.getAttribute("courseid");netid=a.target.getAttribute("netid");coursename=a.target.getAttribute("coursename");disableTradeFunction();$.post("/find_matches/"+courseid,function(b){if(0!==b.data.length){s='<div class="table-responsive">\n                        <table class="table table-hover mt-2">\n                        <thead class="table-white">\n                            <tr>\n                                <th scope="col">NetID</th>\n                                <th scope="col">Current Section</th>\n                                <th scopt="col">Contact <svg\n                                    id="dev-warning"\n                                    xmlns="http://www.w3.org/2000/svg"\n                                    width="16"\n                                    height="16"\n                                    fill="currentColor"\n                                    class="bi bi-exclamation-triangle-fill text-primary ms-1"\n                                    viewBox="0 0 16 16"\n                                    data-bs-toggle="tooltip"\n                                    data-bs-placement="top"\n                                    title="Clicking \'Email\' will notify the user in their Activity page!"\n                                >\n                                    <path\n                                        d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"\n                                    />\n                                </svg></th>\n                            </tr>\n                        </thead>\n                            <tbody>';
for(var c=0;c<b.data.length;c++)match_netid=b.data[c][0],match_section=b.data[c][1],my_section=$(".submit-trade").attr("curr-section"),coursename=$(".submit-trade").attr("coursename"),match_email=b.data[c][2],emailLink=createEmail(match_netid,netid,match_section,my_section,coursename,match_email),s+="<tr>\n                        <td>"+b.data[c][0]+"</td>\n                        <td>"+b.data[c][1]+"</td>\n                        <td><a href="+emailLink+" target='_blank' class='btn btn-outline-primary contact-button' match-netid="+
b.data[c][0]+" match-section="+b.data[c][1]+'>\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope me-1" viewBox="0 0 18 18">\n                                <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"/>\n                            </svg>Email\n                        </a>\n                    </td>\n                        </tr>';
s+="</tbody></table></div>";$("#match-"+courseid).html(s);$(".contact-button").on("click",function(d){d.preventDefault();$(".contact-button").attr("disabled",!0);matchNetid=d.target.getAttribute("match-netid");matchSection=d.target.getAttribute("match-section");matchNetid&&matchSection&&confirm("Are you sure you want to email this user? They will be notified in their Activity page if you confirm!")&&(window.open($(this).prop("href"),"_blank"),$.post("/contact_trade/"+coursename.split("/")[0]+"/"+
matchNetid+"/"+matchSection,function(e){$(".contact-button").attr("disabled",!1)}))});initTooltipsToasts()}else $("#match-"+courseid).html("We're unable to find you a Trade! If you haven't already, make sure to Subscribe to one of more sections for this course. We'll use those sections as the ones you'd like to trade into!");$("#matches-modal").modal("show");enableTradeFunction()})})};
$(document).ready(function(){searchFormListener();searchResultListener();switchListener();showAllListener();modalCancelListener();modalConfirmListener();dashboardCourseSelectListener();pageBackListener();dashboardSkip();searchSkip();initTooltipsToasts();navbarAutoclose();blacklistListener();blacklistRemovalListener();updateTermListener();clearAllWaitlistsListener();clearAllTradesListener();clearAllLogsListener();clearClassWaitlistListener();clearCourseWaitlistListener();getUserDataListener();initToggleEmailNotificationsButton();
toggleEmailNotificationsListener();updateCurrentSection();removeCurrentSection();findMatches();fillSectionListener()});
